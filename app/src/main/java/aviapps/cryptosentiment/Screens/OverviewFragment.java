package aviapps.cryptosentiment.Screens;

import android.graphics.Color;
import android.graphics.Paint;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;

import com.android.volley.Request;
import com.android.volley.RequestQueue;
import com.android.volley.Response;
import com.android.volley.VolleyError;
import com.android.volley.toolbox.StringRequest;
import com.android.volley.toolbox.Volley;
import com.github.mikephil.charting.animation.Easing;
import com.github.mikephil.charting.charts.LineChart;
import com.github.mikephil.charting.components.Description;
import com.github.mikephil.charting.components.XAxis;
import com.github.mikephil.charting.components.YAxis;
import com.github.mikephil.charting.data.CandleData;
import com.github.mikephil.charting.data.CandleDataSet;
import com.github.mikephil.charting.data.CandleEntry;
import com.github.mikephil.charting.data.Entry;
import com.github.mikephil.charting.data.LineData;
import com.github.mikephil.charting.data.LineDataSet;
import com.github.mikephil.charting.listener.ChartTouchListener;
import com.github.mikephil.charting.listener.OnChartGestureListener;
import com.github.mikephil.charting.utils.ColorTemplate;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.util.ArrayList;

import aviapps.cryptosentiment.Custom.MyXAxisValueFormatter;
import aviapps.cryptosentiment.R;

/*
 * Created by Avijeet on 30-Dec-17.
 */

public class OverviewFragment extends Fragment {

    private LineChart chart;
    private RequestQueue queue;

    public OverviewFragment() {
        // Required empty public constructor
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        View view = inflater.inflate(R.layout.overview_fragment, container, false);
        init(view);
        initFlow();
        return view;
    }

    private void init(View view) {
        chart = view.findViewById(R.id.chart);
        queue = Volley.newRequestQueue(getActivity());
    }

    private void initFlow() {
        initChart();
        loadData();
        String response = "{\"market_cap_by_available_supply\":[[1520615967000,150191120829],[1520616265000,150166094641],[1520616566000,150297313036],[1520616866000,149639191910],[1520617166000,149569301208],[1520617466000,149664502256],[1520617766000,149880776040],[1520618066000,149855749832],[1520618366000,149778980248],[1520618666000,150049026560],[1520618965000,150270880512],[1520619266000,150147102240],[1520619566000,150325774295],[1520619866000,150956164630],[1520620166000,151364193568],[1520620466000,151645400416],[1520620767000,152017528750],[1520621066000,152112899035],[1520621365000,151863482066],[1520621665000,151582613195],[1520621966000,151534644799],[1520622267000,151486790490],[1520622566000,151491525192],[1520622866000,150430951944],[1520623166000,149426570556],[1520623465000,148924015015],[1520623766000,149013298099],[1520624066000,148933484433],[1520624367000,149064416604],[1520624666000,149196650458],[1520624966000,149211192800],[1520625266000,149089781154],[1520625566000,149294491775],[1520625866000,149563018605],[1520626166000,150219793295],[1520626465000,150185973795],[1520626767000,150215280648],[1520627066000,150444069904],[1520627366000,150393171481],[1520627666000,150468250882],[1520627966000,149984293122],[1520628265000,149894164021],[1520628566000,150051763124],[1520628866000,151128239400],[1520629167000,152456671324],[1520629466000,152791146674],[1520629766000,152914418934],[1520630066000,153404126018],[1520630366000,154130679330],[1520630666000,154250907916],[1520630966000,154354057616],[1520631266000,154319561651],[1520631566000,154239240163],[1520631865000,154534146848],[1520632166000,154759385211],[1520632466000,154267648605],[1520632766000,154055776974],[1520633066000,153259324217],[1520633366000,153623223651],[1520633665000,153885156840],[1520633967000,153946435306],[1520634266000,153765330010],[1520634564000,154362926759],[1520634865000,154649549988],[1520635166000,155376956124],[1520635466000,156222622073],[1520635766000,156630489754],[1520636066000,156619836494],[1520636366000,156689674533],[1520636666000,156693902018],[1520636966000,156560313515],[1520637266000,156685108850],[1520637566000,157390437811],[1520637865000,157859689617],[1520638166000,158060749220],[1520638467000,157929527814],[1520638765000,157957034066],[1520639066000,158319076888],[1520639366000,158467377474],[1520639666000,158114804245],[1520639964000,157898203938],[1520640266000,158118710664],[1520640566000,158627702417],[1520640867000,158707855935],[1520641166000,158837330343],[1520641466000,158602619030],[1520641766000,158040867601],[1520642066000,157874303736],[1520642364000,157789310427],[1520642667000,157970248090],[1520642966000,157834122091],[1520643266000,157688695558],[1520643566000,158260884622],[1520643864000,158767679570],[1520644167000,159069355308],[1520644466000,158999347598],[1520644767000,158463410671],[1520645066000,158599536872],[1520645366000,158872127474],[1520645667000,159224195485],[1520645967000,159525486774],[1520646265000,159746501781],[1520646566000,159743627064],[1520646866000,159511282290],[1520647165000,159441116036],[1520647465000,159352506918],[1520647767000,158887647252],[1520648066000,158637208123],[1520648365000,158711123869],[1520648666000,158478270759],[1520648967000,158083079970],[1520649266000,157719849411],[1520649566000,157862909491],[1520649867000,157850057758],[1520650163000,158081558054],[1520650467000,158397440123],[1520650766000,158421799202],[1520651065000,158243565568],[1520651366000,158190974809],[1520651666000,156735174658],[1520651966000,156458585795],[1520652265000,156271220369],[1520652565000,156116999007],[1520652866000,156185992774],[1520653166000,156366776383],[1520653466000,156504764227],[1520653766000,156603012925],[1520654066000,156929212130],[1520654365000,157131527817],[1520654666000,157164333871],[1520654966000,157530273563],[1520655266000,157537375905],[1520655566000,157677916923],[1520655866000,158017308150],[1520656166000,158343001972],[1520656466000,158534089210],[1520656766000,158746314416],[1520657066000,158750880217],[1520657367000,158468138747],[1520657666000,158339450793],[1520657966000,158450409186],[1520658266000,158620021000],[1520658566000,158658069512],[1520658867000,158640482644],[1520659166000,158114905858],[1520659466000,157769256260],[1520659767000,157902510606],[1520660066000,158334065290],[1520660366000,158839631356],[1520660667000,158878525419],[1520660966000,158880554674],[1520661266000,158922492620],[1520661566000,158995668045],[1520661866000,159930817312],[1520662165000,160594891665],[1520662466000,161113197724],[1520662767000,161088622742],[1520663067000,161090144686],[1520663365000,161174020701],[1520663666000,161179262952],[1520663966000,160913115269],[1520664266000,160684315865],[1520664566000,160586065715],[1520664865000,160681441076],[1520665167000,160481841656],[1520665467000,160636573070],[1520665767000,160290752588],[1520666066000,160246446981],[1520666366000,160239919660],[1520666667000,160572888626],[1520666967000,160339353764],[1520667266000,160092797770],[1520667565000,160028051708],[1520667866000,159683075468],[1520668166000,159655680296],[1520668466000,159984591466],[1520668766000,160086257741],[1520669066000,159777299709],[1520669366000,159707289514],[1520669666000,159649962326],[1520669966000,159652904058],[1520670266000,159775844847],[1520670566000,159857523528],[1520670866000,159875617977],[1520671166000,159902923135],[1520671466000,160175862834],[1520671765000,160021467577],[1520672066000,159859462477],[1520672366000,159606984800],[1520672666000,159495204663],[1520672966000,159041658027],[1520673265000,158608573412],[1520673566000,158083342156],[1520673866000,158194953436],[1520674166000,158291344996],[1520674466000,158574939112],[1520674766000,158446529466],[1520675066000,158511466984],[1520675366000,158380746407],[1520675665000,158313272267],[1520675965000,158122244742],[1520676266000,157489272114],[1520676566000,157180649338],[1520676866000,157203817185],[1520677166000,157470580402],[1520677466000,157756374612],[1520677766000,157745044309],[1520678064000,157733375788],[1520678366000,158010948141],[1520678665000,158237723645],[1520678965000,158797306153],[1520679265000,158679944334],[1520679566000,158865288072],[1520679866000,158923630763],[1520680165000,158799166355],[1520680466000,158818613919],[1520680766000,158717383006],[1520681066000,158585139377],[1520681366000,158583617391],[1520681667000,158655827148],[1520681966000,159050134254],[1520682266000,159403911579],[1520682566000,159474937619],[1520682866000,159613776617],[1520683166000,159445512545],[1520683467000,159188973252],[1520683766000,159010055274],[1520684067000,158603008419],[1520684366000,158792608105],[1520684666000,158573102845],[1520684966000,158736632573],[1520685266000,158483136128],[1520685566000,158454894696],[1520685866000,158143900726],[1520686165000,157916785499],[1520686464000,158147113823],[1520686765000,158283078560],[1520687066000,158100946692],[1520687367000,158088263414],[1520687666000,158114644632],[1520687966000,157796233183],[1520688266000,157676671621],[1520688566000,157979042303],[1520688867000,158364277435],[1520689167000,158465020367],[1520689466000,158242469962],[1520689766000,158045455356],[1520690067000,158045455356],[1520690366000,158175332796],[1520690666000,158123584753],[1520690966000,158930752750],[1520691266000,159815711921],[1520691566000,160334151674],[1520691866000,160473499443],[1520692166000,160711946474],[1520692466000,160687087103],[1520692766000,160534502943],[1520693066000,160504401096],[1520693366000,160355752087],[1520693665000,160389912610],[1520693966000,160517536583],[1520694266000,160535800638],[1520694566000,160455641730],[1520694866000,160608687746],[1520695167000,160869188344],[1520695466000,160802558267],[1520695765000,160742692665],[1520696066000,160206608037],[1520696366000,159893197544],[1520696666000,159899285576],[1520696965000,159932093304],[1520697266000,159887109512],[1520697564000,159580960916],[1520697864000,159640995719],[1520698166000,159348769976],[1520698467000,159403731415],[1520698767000,159354586251],[1520699066000,159499853776],[1520699366000,159581535051],[1520699665000,159551771274],[1520699966000,159576292568],[1520700265000,159551433049],[1520700566000,159770264456],[1520700866000,159922296477],[1520701166000,159839554287],[1520701466000,159956411025],[1520701764000,159865766725],[1520702066000,159814187412],[1520702366000,159579301066]],\"price_btc\":[[1520615967000,1.0],[1520616265000,1.0],[1520616566000,1.0],[1520616866000,1.0],[1520617166000,1.0],[1520617466000,1.0],[1520617766000,1.0],[1520618066000,1.0],[1520618366000,1.0],[1520618666000,1.0],[1520618965000,1.0],[1520619266000,1.0],[1520619566000,1.0],[1520619866000,1.0],[1520620166000,1.0],[1520620466000,1.0],[1520620767000,1.0],[1520621066000,1.0],[1520621365000,1.0],[1520621665000,1.0],[1520621966000,1.0],[1520622267000,1.0],[1520622566000,1.0],[1520622866000,1.0],[1520623166000,1.0],[1520623465000,1.0],[1520623766000,1.0],[1520624066000,1.0],[1520624367000,1.0],[1520624666000,1.0],[1520624966000,1.0],[1520625266000,1.0],[1520625566000,1.0],[1520625866000,1.0],[1520626166000,1.0],[1520626465000,1.0],[1520626767000,1.0],[1520627066000,1.0],[1520627366000,1.0],[1520627666000,1.0],[1520627966000,1.0],[1520628265000,1.0],[1520628566000,1.0],[1520628866000,1.0],[1520629167000,1.0],[1520629466000,1.0],[1520629766000,1.0],[1520630066000,1.0],[1520630366000,1.0],[1520630666000,1.0],[1520630966000,1.0],[1520631266000,1.0],[1520631566000,1.0],[1520631865000,1.0],[1520632166000,1.0],[1520632466000,1.0],[1520632766000,1.0],[1520633066000,1.0],[1520633366000,1.0],[1520633665000,1.0],[1520633967000,1.0],[1520634266000,1.0],[1520634564000,1.0],[1520634865000,1.0],[1520635166000,1.0],[1520635466000,1.0],[1520635766000,1.0],[1520636066000,1.0],[1520636366000,1.0],[1520636666000,1.0],[1520636966000,1.0],[1520637266000,1.0],[1520637566000,1.0],[1520637865000,1.0],[1520638166000,1.0],[1520638467000,1.0],[1520638765000,1.0],[1520639066000,1.0],[1520639366000,1.0],[1520639666000,1.0],[1520639964000,1.0],[1520640266000,1.0],[1520640566000,1.0],[1520640867000,1.0],[1520641166000,1.0],[1520641466000,1.0],[1520641766000,1.0],[1520642066000,1.0],[1520642364000,1.0],[1520642667000,1.0],[1520642966000,1.0],[1520643266000,1.0],[1520643566000,1.0],[1520643864000,1.0],[1520644167000,1.0],[1520644466000,1.0],[1520644767000,1.0],[1520645066000,1.0],[1520645366000,1.0],[1520645667000,1.0],[1520645967000,1.0],[1520646265000,1.0],[1520646566000,1.0],[1520646866000,1.0],[1520647165000,1.0],[1520647465000,1.0],[1520647767000,1.0],[1520648066000,1.0],[1520648365000,1.0],[1520648666000,1.0],[1520648967000,1.0],[1520649266000,1.0],[1520649566000,1.0],[1520649867000,1.0],[1520650163000,1.0],[1520650467000,1.0],[1520650766000,1.0],[1520651065000,1.0],[1520651366000,1.0],[1520651666000,1.0],[1520651966000,1.0],[1520652265000,1.0],[1520652565000,1.0],[1520652866000,1.0],[1520653166000,1.0],[1520653466000,1.0],[1520653766000,1.0],[1520654066000,1.0],[1520654365000,1.0],[1520654666000,1.0],[1520654966000,1.0],[1520655266000,1.0],[1520655566000,1.0],[1520655866000,1.0],[1520656166000,1.0],[1520656466000,1.0],[1520656766000,1.0],[1520657066000,1.0],[1520657367000,1.0],[1520657666000,1.0],[1520657966000,1.0],[1520658266000,1.0],[1520658566000,1.0],[1520658867000,1.0],[1520659166000,1.0],[1520659466000,1.0],[1520659767000,1.0],[1520660066000,1.0],[1520660366000,1.0],[1520660667000,1.0],[1520660966000,1.0],[1520661266000,1.0],[1520661566000,1.0],[1520661866000,1.0],[1520662165000,1.0],[1520662466000,1.0],[1520662767000,1.0],[1520663067000,1.0],[1520663365000,1.0],[1520663666000,1.0],[1520663966000,1.0],[1520664266000,1.0],[1520664566000,1.0],[1520664865000,1.0],[1520665167000,1.0],[1520665467000,1.0],[1520665767000,1.0],[1520666066000,1.0],[1520666366000,1.0],[1520666667000,1.0],[1520666967000,1.0],[1520667266000,1.0],[1520667565000,1.0],[1520667866000,1.0],[1520668166000,1.0],[1520668466000,1.0],[1520668766000,1.0],[1520669066000,1.0],[1520669366000,1.0],[1520669666000,1.0],[1520669966000,1.0],[1520670266000,1.0],[1520670566000,1.0],[1520670866000,1.0],[1520671166000,1.0],[1520671466000,1.0],[1520671765000,1.0],[1520672066000,1.0],[1520672366000,1.0],[1520672666000,1.0],[1520672966000,1.0],[1520673265000,1.0],[1520673566000,1.0],[1520673866000,1.0],[1520674166000,1.0],[1520674466000,1.0],[1520674766000,1.0],[1520675066000,1.0],[1520675366000,1.0],[1520675665000,1.0],[1520675965000,1.0],[1520676266000,1.0],[1520676566000,1.0],[1520676866000,1.0],[1520677166000,1.0],[1520677466000,1.0],[1520677766000,1.0],[1520678064000,1.0],[1520678366000,1.0],[1520678665000,1.0],[1520678965000,1.0],[1520679265000,1.0],[1520679566000,1.0],[1520679866000,1.0],[1520680165000,1.0],[1520680466000,1.0],[1520680766000,1.0],[1520681066000,1.0],[1520681366000,1.0],[1520681667000,1.0],[1520681966000,1.0],[1520682266000,1.0],[1520682566000,1.0],[1520682866000,1.0],[1520683166000,1.0],[1520683467000,1.0],[1520683766000,1.0],[1520684067000,1.0],[1520684366000,1.0],[1520684666000,1.0],[1520684966000,1.0],[1520685266000,1.0],[1520685566000,1.0],[1520685866000,1.0],[1520686165000,1.0],[1520686464000,1.0],[1520686765000,1.0],[1520687066000,1.0],[1520687367000,1.0],[1520687666000,1.0],[1520687966000,1.0],[1520688266000,1.0],[1520688566000,1.0],[1520688867000,1.0],[1520689167000,1.0],[1520689466000,1.0],[1520689766000,1.0],[1520690067000,1.0],[1520690366000,1.0],[1520690666000,1.0],[1520690966000,1.0],[1520691266000,1.0],[1520691566000,1.0],[1520691866000,1.0],[1520692166000,1.0],[1520692466000,1.0],[1520692766000,1.0],[1520693066000,1.0],[1520693366000,1.0],[1520693665000,1.0],[1520693966000,1.0],[1520694266000,1.0],[1520694566000,1.0],[1520694866000,1.0],[1520695167000,1.0],[1520695466000,1.0],[1520695765000,1.0],[1520696066000,1.0],[1520696366000,1.0],[1520696666000,1.0],[1520696965000,1.0],[1520697266000,1.0],[1520697564000,1.0],[1520697864000,1.0],[1520698166000,1.0],[1520698467000,1.0],[1520698767000,1.0],[1520699066000,1.0],[1520699366000,1.0],[1520699665000,1.0],[1520699966000,1.0],[1520700265000,1.0],[1520700566000,1.0],[1520700866000,1.0],[1520701166000,1.0],[1520701466000,1.0],[1520701764000,1.0],[1520702066000,1.0],[1520702366000,1.0]],\"price_usd\":[[1520615967000,8882.01],[1520616265000,8880.53],[1520616566000,8888.29],[1520616866000,8849.37],[1520617166000,8845.23],[1520617466000,8850.86],[1520617766000,8863.65],[1520618066000,8862.17],[1520618366000,8857.63],[1520618666000,8873.6],[1520618965000,8886.72],[1520619266000,8879.4],[1520619566000,8889.96],[1520619866000,8927.24],[1520620166000,8951.37],[1520620466000,8968.0],[1520620767000,8990.0],[1520621066000,8995.64],[1520621365000,8980.89],[1520621665000,8964.28],[1520621966000,8961.43],[1520622267000,8958.6],[1520622566000,8958.88],[1520622866000,8896.16],[1520623166000,8836.75],[1520623465000,8807.03],[1520623766000,8812.31],[1520624066000,8807.59],[1520624367000,8815.32],[1520624666000,8823.14],[1520624966000,8824.0],[1520625266000,8816.82],[1520625566000,8828.9],[1520625866000,8844.78],[1520626166000,8883.62],[1520626465000,8881.62],[1520626767000,8883.34],[1520627066000,8896.87],[1520627366000,8893.86],[1520627666000,8898.3],[1520627966000,8869.68],[1520628265000,8864.35],[1520628566000,8873.67],[1520628866000,8937.33],[1520629167000,9015.89],[1520629466000,9035.67],[1520629766000,9042.96],[1520630066000,9071.92],[1520630366000,9114.88],[1520630666000,9121.99],[1520630966000,9128.09],[1520631266000,9126.05],[1520631566000,9121.3],[1520631865000,9138.74],[1520632166000,9152.06],[1520632466000,9122.98],[1520632766000,9110.43],[1520633066000,9063.33],[1520633366000,9084.85],[1520633665000,9100.34],[1520633967000,9103.91],[1520634266000,9093.2],[1520634564000,9128.54],[1520634865000,9145.49],[1520635166000,9188.5],[1520635466000,9238.51],[1520635766000,9262.63],[1520636066000,9262.0],[1520636366000,9266.13],[1520636666000,9266.38],[1520636966000,9258.48],[1520637266000,9265.86],[1520637566000,9307.55],[1520637865000,9335.3],[1520638166000,9347.19],[1520638467000,9339.43],[1520638765000,9341.05],[1520639066000,9362.46],[1520639366000,9371.23],[1520639666000,9350.38],[1520639964000,9337.55],[1520640266000,9350.59],[1520640566000,9380.69],[1520640867000,9385.43],[1520641166000,9393.08],[1520641466000,9379.2],[1520641766000,9345.98],[1520642066000,9336.13],[1520642364000,9331.09],[1520642667000,9341.79],[1520642966000,9333.74],[1520643266000,9325.14],[1520643566000,9358.97],[1520643864000,9388.94],[1520644167000,9406.78],[1520644466000,9402.64],[1520644767000,9370.94],[1520645066000,9378.99],[1520645366000,9395.11],[1520645667000,9415.93],[1520645967000,9433.74],[1520646265000,9446.81],[1520646566000,9446.64],[1520646866000,9432.9],[1520647165000,9428.73],[1520647465000,9423.49],[1520647767000,9396.0],[1520648066000,9381.19],[1520648365000,9385.54],[1520648666000,9371.77],[1520648967000,9348.4],[1520649266000,9326.92],[1520649566000,9335.38],[1520649867000,9334.62],[1520650163000,9348.31],[1520650467000,9366.99],[1520650766000,9368.41],[1520651065000,9357.87],[1520651366000,9354.76],[1520651666000,9268.67],[1520651966000,9252.3],[1520652265000,9241.22],[1520652565000,9232.1],[1520652866000,9236.18],[1520653166000,9246.85],[1520653466000,9255.01],[1520653766000,9260.82],[1520654066000,9280.11],[1520654365000,9292.04],[1520654666000,9293.98],[1520654966000,9315.62],[1520655266000,9316.04],[1520655566000,9324.33],[1520655866000,9344.4],[1520656166000,9363.66],[1520656466000,9374.96],[1520656766000,9387.51],[1520657066000,9387.78],[1520657367000,9371.06],[1520657666000,9363.45],[1520657966000,9369.97],[1520658266000,9380.0],[1520658566000,9382.25],[1520658867000,9381.21],[1520659166000,9350.13],[1520659466000,9329.69],[1520659767000,9337.57],[1520660066000,9363.09],[1520660366000,9392.98],[1520660667000,9395.28],[1520660966000,9395.4],[1520661266000,9397.88],[1520661566000,9402.2],[1520661866000,9457.5],[1520662165000,9496.77],[1520662466000,9527.42],[1520662767000,9525.96],[1520663067000,9526.05],[1520663365000,9531.01],[1520663666000,9531.32],[1520663966000,9515.56],[1520664266000,9502.03],[1520664566000,9496.22],[1520664865000,9501.86],[1520665167000,9490.05],[1520665467000,9499.2],[1520665767000,9478.75],[1520666066000,9476.13],[1520666366000,9475.73],[1520666667000,9495.42],[1520666967000,9481.61],[1520667266000,9467.03],[1520667565000,9463.18],[1520667866000,9442.78],[1520668166000,9441.16],[1520668466000,9460.61],[1520668766000,9466.58],[1520669066000,9448.31],[1520669366000,9444.17],[1520669666000,9440.78],[1520669966000,9440.94],[1520670266000,9448.21],[1520670566000,9453.04],[1520670866000,9454.11],[1520671166000,9455.69],[1520671466000,9471.83],[1520671765000,9462.7],[1520672066000,9453.12],[1520672366000,9438.19],[1520672666000,9431.58],[1520672966000,9404.76],[1520673265000,9379.15],[1520673566000,9348.07],[1520673866000,9354.67],[1520674166000,9360.37],[1520674466000,9377.14],[1520674766000,9369.54],[1520675066000,9373.38],[1520675366000,9365.65],[1520675665000,9361.66],[1520675965000,9350.35],[1520676266000,9312.92],[1520676566000,9294.67],[1520676866000,9296.04],[1520677166000,9311.78],[1520677466000,9328.68],[1520677766000,9328.01],[1520678064000,9327.32],[1520678366000,9343.72],[1520678665000,9357.13],[1520678965000,9390.22],[1520679265000,9383.28],[1520679566000,9394.24],[1520679866000,9397.69],[1520680165000,9390.33],[1520680466000,9391.48],[1520680766000,9385.48],[1520681066000,9377.66],[1520681366000,9377.57],[1520681667000,9381.84],[1520681966000,9405.15],[1520682266000,9426.07],[1520682566000,9430.27],[1520682866000,9438.48],[1520683166000,9428.53],[1520683467000,9413.36],[1520683766000,9402.78],[1520684067000,9378.71],[1520684366000,9389.88],[1520684666000,9376.9],[1520684966000,9386.57],[1520685266000,9371.58],[1520685566000,9369.91],[1520685866000,9351.52],[1520686165000,9338.09],[1520686464000,9351.71],[1520686765000,9359.75],[1520687066000,9348.98],[1520687367000,9348.23],[1520687666000,9349.79],[1520687966000,9330.92],[1520688266000,9323.85],[1520688566000,9341.73],[1520688867000,9364.51],[1520689167000,9370.46],[1520689466000,9357.3],[1520689766000,9345.65],[1520690067000,9345.65],[1520690366000,9353.33],[1520690666000,9350.27],[1520690966000,9398.0],[1520691266000,9450.33],[1520691566000,9480.98],[1520691866000,9489.22],[1520692166000,9503.32],[1520692466000,9501.85],[1520692766000,9492.82],[1520693066000,9491.04],[1520693366000,9482.25],[1520693665000,9484.27],[1520693966000,9491.81],[1520694266000,9492.89],[1520694566000,9488.15],[1520694866000,9497.2],[1520695167000,9512.59],[1520695466000,9508.65],[1520695765000,9505.11],[1520696066000,9473.41],[1520696366000,9454.87],[1520696666000,9455.23],[1520696965000,9457.17],[1520697266000,9454.51],[1520697564000,9436.4],[1520697864000,9439.95],[1520698166000,9422.67],[1520698467000,9425.92],[1520698767000,9423.0],[1520699066000,9431.59],[1520699366000,9436.42],[1520699665000,9434.66],[1520699966000,9436.11],[1520700265000,9434.64],[1520700566000,9447.58],[1520700866000,9456.57],[1520701166000,9451.67],[1520701466000,9458.58],[1520701764000,9453.22],[1520702066000,9450.17],[1520702366000,9436.26]],\"volume_usd\":[[1520615967000,8433140000],[1520616265000,8356970000],[1520616566000,8311500000],[1520616866000,8268780000],[1520617166000,8223270000],[1520617466000,8202950000],[1520617766000,8211190000],[1520618066000,8209660000],[1520618366000,8193990000],[1520618666000,8195160000],[1520618965000,8199530000],[1520619266000,8185820000],[1520619566000,8159070000],[1520619866000,8202730000],[1520620166000,8228520000],[1520620466000,8221950000],[1520620767000,8231720000],[1520621066000,8222290000],[1520621365000,8191210000],[1520621665000,8175870000],[1520621966000,8176490000],[1520622267000,8175860000],[1520622566000,8166300000],[1520622866000,8127320000],[1520623166000,8072460000],[1520623465000,8070690000],[1520623766000,8081500000],[1520624066000,8091510000],[1520624367000,8083340000],[1520624666000,8090690000],[1520624966000,8089490000],[1520625266000,8083350000],[1520625566000,8085210000],[1520625866000,8102130000],[1520626166000,8132320000],[1520626465000,8134650000],[1520626767000,8120150000],[1520627066000,8142340000],[1520627366000,8147620000],[1520627666000,8142970000],[1520627966000,8121180000],[1520628265000,8095920000],[1520628566000,8110300000],[1520628866000,8174040000],[1520629167000,8265690000],[1520629466000,8281700000],[1520629766000,8273880000],[1520630066000,8301560000],[1520630366000,8378890000],[1520630666000,8374830000],[1520630966000,8377960000],[1520631266000,8377430000],[1520631566000,8370330000],[1520631865000,8373870000],[1520632166000,8394840000],[1520632466000,8382560000],[1520632766000,8356750000],[1520633066000,8335880000],[1520633366000,8344880000],[1520633665000,8372590000],[1520633967000,8368780000],[1520634266000,8360030000],[1520634564000,8393180000],[1520634865000,8410600000],[1520635166000,8427480000],[1520635466000,8510990000],[1520635766000,8532630000],[1520636066000,8527780000],[1520636366000,8525140000],[1520636666000,8525660000],[1520636966000,8516640000],[1520637266000,8526710000],[1520637566000,8580790000],[1520637865000,8631020000],[1520638166000,8638340000],[1520638467000,8656020000],[1520638765000,8660260000],[1520639066000,8688960000],[1520639366000,8715720000],[1520639666000,8711570000],[1520639964000,8704190000],[1520640266000,8715590000],[1520640566000,8752070000],[1520640867000,8766650000],[1520641166000,8769170000],[1520641466000,8774540000],[1520641766000,8757740000],[1520642066000,8764950000],[1520642364000,8776810000],[1520642667000,8783120000],[1520642966000,8785140000],[1520643266000,8782090000],[1520643566000,8831250000],[1520643864000,8860600000],[1520644167000,8885360000],[1520644466000,8871230000],[1520644767000,8850510000],[1520645066000,8841740000],[1520645366000,8862820000],[1520645667000,8879630000],[1520645967000,8914720000],[1520646265000,8891930000],[1520646566000,8791560000],[1520646866000,8740550000],[1520647165000,8708220000],[1520647465000,8683500000],[1520647767000,8627720000],[1520648066000,8560020000],[1520648365000,8522110000],[1520648666000,8502940000],[1520648967000,8461620000],[1520649266000,8432280000],[1520649566000,8429220000],[1520649867000,8429500000],[1520650163000,8428340000],[1520650467000,8436510000],[1520650766000,8434670000],[1520651065000,8412600000],[1520651366000,8393930000],[1520651666000,8379620000],[1520651966000,8346780000],[1520652265000,8353340000],[1520652565000,8334110000],[1520652866000,8337720000],[1520653166000,8343580000],[1520653466000,8341290000],[1520653766000,8336990000],[1520654066000,8341860000],[1520654365000,8349930000],[1520654666000,8328300000],[1520654966000,8299330000],[1520655266000,8288230000],[1520655566000,8217680000],[1520655866000,8179740000],[1520656166000,8178250000],[1520656466000,8142680000],[1520656766000,8107530000],[1520657066000,8084530000],[1520657367000,8047380000],[1520657666000,8022910000],[1520657966000,8009060000],[1520658266000,7994360000],[1520658566000,7973950000],[1520658867000,7947870000],[1520659166000,7916530000],[1520659466000,7892500000],[1520659767000,7895230000],[1520660066000,7901410000],[1520660366000,7921010000],[1520660667000,7914150000],[1520660966000,7893600000],[1520661266000,7822860000],[1520661566000,7786120000],[1520661866000,7799170000],[1520662165000,7811410000],[1520662466000,7803940000],[1520662767000,7772970000],[1520663067000,7734750000],[1520663365000,7711520000],[1520663666000,7664950000],[1520663966000,7623040000],[1520664266000,7590670000],[1520664566000,7569390000],[1520664865000,7564700000],[1520665167000,7539660000],[1520665467000,7490270000],[1520665767000,7449440000],[1520666066000,7437820000],[1520666366000,7415300000],[1520666667000,7417320000],[1520666967000,7399500000],[1520667266000,7372540000],[1520667565000,7353120000],[1520667866000,7336030000],[1520668166000,7315200000],[1520668466000,7317080000],[1520668766000,7322330000],[1520669066000,7297760000],[1520669366000,7261210000],[1520669666000,7263590000],[1520669966000,7251360000],[1520670266000,7241570000],[1520670566000,7234770000],[1520670866000,7228210000],[1520671166000,7218250000],[1520671466000,7209270000],[1520671765000,7202530000],[1520672066000,7184000000],[1520672366000,7135930000],[1520672666000,7125690000],[1520672966000,7117300000],[1520673265000,7065440000],[1520673566000,7056760000],[1520673866000,7067190000],[1520674166000,7065520000],[1520674466000,7068510000],[1520674766000,7053600000],[1520675066000,7018270000],[1520675366000,6978750000],[1520675665000,6950900000],[1520675965000,6925830000],[1520676266000,6900260000],[1520676566000,6876520000],[1520676866000,6864190000],[1520677166000,6872840000],[1520677466000,6859550000],[1520677766000,6849900000],[1520678064000,6839190000],[1520678366000,6842030000],[1520678665000,6855620000],[1520678965000,6861120000],[1520679265000,6853120000],[1520679566000,6820620000],[1520679866000,6819010000],[1520680165000,6806150000],[1520680466000,6795390000],[1520680766000,6794780000],[1520681066000,6773670000],[1520681366000,6764230000],[1520681667000,6769530000],[1520681966000,6781330000],[1520682266000,6785560000],[1520682566000,6747630000],[1520682866000,6713220000],[1520683166000,6687630000],[1520683467000,6650320000],[1520683766000,6595810000],[1520684067000,6569250000],[1520684366000,6560830000],[1520684666000,6558810000],[1520684966000,6541240000],[1520685266000,6532300000],[1520685566000,6513100000],[1520685866000,6500420000],[1520686165000,6488620000],[1520686464000,6488420000],[1520686765000,6478450000],[1520687066000,6455600000],[1520687367000,6444710000],[1520687666000,6435920000],[1520687966000,6419920000],[1520688266000,6409680000],[1520688566000,6416560000],[1520688867000,6427700000],[1520689167000,6419770000],[1520689466000,6404740000],[1520689766000,6386560000],[1520690067000,6376740000],[1520690366000,6383100000],[1520690666000,6376230000],[1520690966000,6402100000],[1520691266000,6460120000],[1520691566000,6479660000],[1520691866000,6474360000],[1520692166000,6463630000],[1520692466000,6447060000],[1520692766000,6420260000],[1520693066000,6408260000],[1520693366000,6403290000],[1520693665000,6376970000],[1520693966000,6366680000],[1520694266000,6352310000],[1520694566000,6319950000],[1520694866000,6296750000],[1520695167000,6298810000],[1520695466000,6288440000],[1520695765000,6265890000],[1520696066000,6240710000],[1520696366000,6220270000],[1520696666000,6216700000],[1520696965000,6219470000],[1520697266000,6209880000],[1520697564000,6193220000],[1520697864000,6186420000],[1520698166000,6177180000],[1520698467000,6158680000],[1520698767000,6153530000],[1520699066000,6122730000],[1520699366000,6083610000],[1520699665000,6050610000],[1520699966000,6000460000],[1520700265000,5979350000],[1520700566000,5967090000],[1520700866000,5954690000],[1520701166000,5941500000],[1520701466000,5922430000],[1520701764000,5898860000],[1520702066000,5882300000],[1520702366000,5867670000]]}";
        setDataFromResponse(response);
    }

    private void initChart() {
        Description description = new Description();
        description.setText("");
        chart.setDescription(description);
        chart.setNoDataText("No data");

        // enable value highlighting

        // enable touch gestures
        chart.setTouchEnabled(true);

        chart.setDragDecelerationFrictionCoef(0.9f);

        // enable scaling and dragging
        chart.setDragEnabled(true);
        chart.setScaleEnabled(true);
        chart.setDrawGridBackground(false);
        chart.setHighlightPerDragEnabled(true);
        chart.setHighlightPerTapEnabled(true);

        chart.animateX(500, Easing.EasingOption.EaseInBack);
//        chart.fitScreen();
//        chart.setPinchZoom(false);
//        chart.setDoubleTapToZoomEnabled(false);

        XAxis xAxis = chart.getXAxis();
//        xAxis.setDrawGridLines(false);
//        xAxis.setPosition(XAxis.XAxisPosition.BOTTOM_INSIDE);
        xAxis.setValueFormatter(new MyXAxisValueFormatter());
        xAxis.setLabelCount(5, true);
//        xAxis.setLabelRotationAngle(-90);
//        xAxis.setGranularity(3600000f);
        xAxis.setPosition(XAxis.XAxisPosition.BOTTOM);
//        Typeface tf = Typeface.createFromAsset(getActivity().getAssets(), "fonts/worksenslight.ttf");
//        xAxis.setTypeface(tf);
//        xAxis.setTextSize(12f);
        xAxis.setAvoidFirstLastClipping(true);
        xAxis.setTextColor(Color.CYAN);
        xAxis.setDrawAxisLine(true);
        xAxis.setDrawGridLines(true);
        xAxis.setCenterAxisLabels(false);

        YAxis leftAxis = chart.getAxisLeft();
        leftAxis.setTextColor(ColorTemplate.getHoloBlue());
        leftAxis.setDrawGridLines(true);

        YAxis rightAxis = chart.getAxisRight();
        rightAxis.setEnabled(false);
        rightAxis.setEnabled(false);
    }

    private void loadData() {
        String url = "https://graphs2.coinmarketcap.com/currencies/bitcoin/1520615966000/1520702366000/";
        StringRequest stringRequest = new StringRequest(Request.Method.GET, url,
                new Response.Listener<String>() {
                    @Override
                    public void onResponse(String response) {
                        setDataFromResponse(response);
                    }
                }, new Response.ErrorListener() {
            @Override
            public void onErrorResponse(VolleyError error) {
                Log.d("ASD", "SSS");
//                String response = "{\"market_cap_by_available_supply\":[[1520615967000,150191120829],[1520616265000,150166094641],[1520616566000,150297313036],[1520616866000,149639191910],[1520617166000,149569301208],[1520617466000,149664502256],[1520617766000,149880776040],[1520618066000,149855749832],[1520618366000,149778980248],[1520618666000,150049026560],[1520618965000,150270880512],[1520619266000,150147102240],[1520619566000,150325774295],[1520619866000,150956164630],[1520620166000,151364193568],[1520620466000,151645400416],[1520620767000,152017528750],[1520621066000,152112899035],[1520621365000,151863482066],[1520621665000,151582613195],[1520621966000,151534644799],[1520622267000,151486790490],[1520622566000,151491525192],[1520622866000,150430951944],[1520623166000,149426570556],[1520623465000,148924015015],[1520623766000,149013298099],[1520624066000,148933484433],[1520624367000,149064416604],[1520624666000,149196650458],[1520624966000,149211192800],[1520625266000,149089781154],[1520625566000,149294491775],[1520625866000,149563018605],[1520626166000,150219793295],[1520626465000,150185973795],[1520626767000,150215280648],[1520627066000,150444069904],[1520627366000,150393171481],[1520627666000,150468250882],[1520627966000,149984293122],[1520628265000,149894164021],[1520628566000,150051763124],[1520628866000,151128239400],[1520629167000,152456671324],[1520629466000,152791146674],[1520629766000,152914418934],[1520630066000,153404126018],[1520630366000,154130679330],[1520630666000,154250907916],[1520630966000,154354057616],[1520631266000,154319561651],[1520631566000,154239240163],[1520631865000,154534146848],[1520632166000,154759385211],[1520632466000,154267648605],[1520632766000,154055776974],[1520633066000,153259324217],[1520633366000,153623223651],[1520633665000,153885156840],[1520633967000,153946435306],[1520634266000,153765330010],[1520634564000,154362926759],[1520634865000,154649549988],[1520635166000,155376956124],[1520635466000,156222622073],[1520635766000,156630489754],[1520636066000,156619836494],[1520636366000,156689674533],[1520636666000,156693902018],[1520636966000,156560313515],[1520637266000,156685108850],[1520637566000,157390437811],[1520637865000,157859689617],[1520638166000,158060749220],[1520638467000,157929527814],[1520638765000,157957034066],[1520639066000,158319076888],[1520639366000,158467377474],[1520639666000,158114804245],[1520639964000,157898203938],[1520640266000,158118710664],[1520640566000,158627702417],[1520640867000,158707855935],[1520641166000,158837330343],[1520641466000,158602619030],[1520641766000,158040867601],[1520642066000,157874303736],[1520642364000,157789310427],[1520642667000,157970248090],[1520642966000,157834122091],[1520643266000,157688695558],[1520643566000,158260884622],[1520643864000,158767679570],[1520644167000,159069355308],[1520644466000,158999347598],[1520644767000,158463410671],[1520645066000,158599536872],[1520645366000,158872127474],[1520645667000,159224195485],[1520645967000,159525486774],[1520646265000,159746501781],[1520646566000,159743627064],[1520646866000,159511282290],[1520647165000,159441116036],[1520647465000,159352506918],[1520647767000,158887647252],[1520648066000,158637208123],[1520648365000,158711123869],[1520648666000,158478270759],[1520648967000,158083079970],[1520649266000,157719849411],[1520649566000,157862909491],[1520649867000,157850057758],[1520650163000,158081558054],[1520650467000,158397440123],[1520650766000,158421799202],[1520651065000,158243565568],[1520651366000,158190974809],[1520651666000,156735174658],[1520651966000,156458585795],[1520652265000,156271220369],[1520652565000,156116999007],[1520652866000,156185992774],[1520653166000,156366776383],[1520653466000,156504764227],[1520653766000,156603012925],[1520654066000,156929212130],[1520654365000,157131527817],[1520654666000,157164333871],[1520654966000,157530273563],[1520655266000,157537375905],[1520655566000,157677916923],[1520655866000,158017308150],[1520656166000,158343001972],[1520656466000,158534089210],[1520656766000,158746314416],[1520657066000,158750880217],[1520657367000,158468138747],[1520657666000,158339450793],[1520657966000,158450409186],[1520658266000,158620021000],[1520658566000,158658069512],[1520658867000,158640482644],[1520659166000,158114905858],[1520659466000,157769256260],[1520659767000,157902510606],[1520660066000,158334065290],[1520660366000,158839631356],[1520660667000,158878525419],[1520660966000,158880554674],[1520661266000,158922492620],[1520661566000,158995668045],[1520661866000,159930817312],[1520662165000,160594891665],[1520662466000,161113197724],[1520662767000,161088622742],[1520663067000,161090144686],[1520663365000,161174020701],[1520663666000,161179262952],[1520663966000,160913115269],[1520664266000,160684315865],[1520664566000,160586065715],[1520664865000,160681441076],[1520665167000,160481841656],[1520665467000,160636573070],[1520665767000,160290752588],[1520666066000,160246446981],[1520666366000,160239919660],[1520666667000,160572888626],[1520666967000,160339353764],[1520667266000,160092797770],[1520667565000,160028051708],[1520667866000,159683075468],[1520668166000,159655680296],[1520668466000,159984591466],[1520668766000,160086257741],[1520669066000,159777299709],[1520669366000,159707289514],[1520669666000,159649962326],[1520669966000,159652904058],[1520670266000,159775844847],[1520670566000,159857523528],[1520670866000,159875617977],[1520671166000,159902923135],[1520671466000,160175862834],[1520671765000,160021467577],[1520672066000,159859462477],[1520672366000,159606984800],[1520672666000,159495204663],[1520672966000,159041658027],[1520673265000,158608573412],[1520673566000,158083342156],[1520673866000,158194953436],[1520674166000,158291344996],[1520674466000,158574939112],[1520674766000,158446529466],[1520675066000,158511466984],[1520675366000,158380746407],[1520675665000,158313272267],[1520675965000,158122244742],[1520676266000,157489272114],[1520676566000,157180649338],[1520676866000,157203817185],[1520677166000,157470580402],[1520677466000,157756374612],[1520677766000,157745044309],[1520678064000,157733375788],[1520678366000,158010948141],[1520678665000,158237723645],[1520678965000,158797306153],[1520679265000,158679944334],[1520679566000,158865288072],[1520679866000,158923630763],[1520680165000,158799166355],[1520680466000,158818613919],[1520680766000,158717383006],[1520681066000,158585139377],[1520681366000,158583617391],[1520681667000,158655827148],[1520681966000,159050134254],[1520682266000,159403911579],[1520682566000,159474937619],[1520682866000,159613776617],[1520683166000,159445512545],[1520683467000,159188973252],[1520683766000,159010055274],[1520684067000,158603008419],[1520684366000,158792608105],[1520684666000,158573102845],[1520684966000,158736632573],[1520685266000,158483136128],[1520685566000,158454894696],[1520685866000,158143900726],[1520686165000,157916785499],[1520686464000,158147113823],[1520686765000,158283078560],[1520687066000,158100946692],[1520687367000,158088263414],[1520687666000,158114644632],[1520687966000,157796233183],[1520688266000,157676671621],[1520688566000,157979042303],[1520688867000,158364277435],[1520689167000,158465020367],[1520689466000,158242469962],[1520689766000,158045455356],[1520690067000,158045455356],[1520690366000,158175332796],[1520690666000,158123584753],[1520690966000,158930752750],[1520691266000,159815711921],[1520691566000,160334151674],[1520691866000,160473499443],[1520692166000,160711946474],[1520692466000,160687087103],[1520692766000,160534502943],[1520693066000,160504401096],[1520693366000,160355752087],[1520693665000,160389912610],[1520693966000,160517536583],[1520694266000,160535800638],[1520694566000,160455641730],[1520694866000,160608687746],[1520695167000,160869188344],[1520695466000,160802558267],[1520695765000,160742692665],[1520696066000,160206608037],[1520696366000,159893197544],[1520696666000,159899285576],[1520696965000,159932093304],[1520697266000,159887109512],[1520697564000,159580960916],[1520697864000,159640995719],[1520698166000,159348769976],[1520698467000,159403731415],[1520698767000,159354586251],[1520699066000,159499853776],[1520699366000,159581535051],[1520699665000,159551771274],[1520699966000,159576292568],[1520700265000,159551433049],[1520700566000,159770264456],[1520700866000,159922296477],[1520701166000,159839554287],[1520701466000,159956411025],[1520701764000,159865766725],[1520702066000,159814187412],[1520702366000,159579301066]],\"price_btc\":[[1520615967000,1.0],[1520616265000,1.0],[1520616566000,1.0],[1520616866000,1.0],[1520617166000,1.0],[1520617466000,1.0],[1520617766000,1.0],[1520618066000,1.0],[1520618366000,1.0],[1520618666000,1.0],[1520618965000,1.0],[1520619266000,1.0],[1520619566000,1.0],[1520619866000,1.0],[1520620166000,1.0],[1520620466000,1.0],[1520620767000,1.0],[1520621066000,1.0],[1520621365000,1.0],[1520621665000,1.0],[1520621966000,1.0],[1520622267000,1.0],[1520622566000,1.0],[1520622866000,1.0],[1520623166000,1.0],[1520623465000,1.0],[1520623766000,1.0],[1520624066000,1.0],[1520624367000,1.0],[1520624666000,1.0],[1520624966000,1.0],[1520625266000,1.0],[1520625566000,1.0],[1520625866000,1.0],[1520626166000,1.0],[1520626465000,1.0],[1520626767000,1.0],[1520627066000,1.0],[1520627366000,1.0],[1520627666000,1.0],[1520627966000,1.0],[1520628265000,1.0],[1520628566000,1.0],[1520628866000,1.0],[1520629167000,1.0],[1520629466000,1.0],[1520629766000,1.0],[1520630066000,1.0],[1520630366000,1.0],[1520630666000,1.0],[1520630966000,1.0],[1520631266000,1.0],[1520631566000,1.0],[1520631865000,1.0],[1520632166000,1.0],[1520632466000,1.0],[1520632766000,1.0],[1520633066000,1.0],[1520633366000,1.0],[1520633665000,1.0],[1520633967000,1.0],[1520634266000,1.0],[1520634564000,1.0],[1520634865000,1.0],[1520635166000,1.0],[1520635466000,1.0],[1520635766000,1.0],[1520636066000,1.0],[1520636366000,1.0],[1520636666000,1.0],[1520636966000,1.0],[1520637266000,1.0],[1520637566000,1.0],[1520637865000,1.0],[1520638166000,1.0],[1520638467000,1.0],[1520638765000,1.0],[1520639066000,1.0],[1520639366000,1.0],[1520639666000,1.0],[1520639964000,1.0],[1520640266000,1.0],[1520640566000,1.0],[1520640867000,1.0],[1520641166000,1.0],[1520641466000,1.0],[1520641766000,1.0],[1520642066000,1.0],[1520642364000,1.0],[1520642667000,1.0],[1520642966000,1.0],[1520643266000,1.0],[1520643566000,1.0],[1520643864000,1.0],[1520644167000,1.0],[1520644466000,1.0],[1520644767000,1.0],[1520645066000,1.0],[1520645366000,1.0],[1520645667000,1.0],[1520645967000,1.0],[1520646265000,1.0],[1520646566000,1.0],[1520646866000,1.0],[1520647165000,1.0],[1520647465000,1.0],[1520647767000,1.0],[1520648066000,1.0],[1520648365000,1.0],[1520648666000,1.0],[1520648967000,1.0],[1520649266000,1.0],[1520649566000,1.0],[1520649867000,1.0],[1520650163000,1.0],[1520650467000,1.0],[1520650766000,1.0],[1520651065000,1.0],[1520651366000,1.0],[1520651666000,1.0],[1520651966000,1.0],[1520652265000,1.0],[1520652565000,1.0],[1520652866000,1.0],[1520653166000,1.0],[1520653466000,1.0],[1520653766000,1.0],[1520654066000,1.0],[1520654365000,1.0],[1520654666000,1.0],[1520654966000,1.0],[1520655266000,1.0],[1520655566000,1.0],[1520655866000,1.0],[1520656166000,1.0],[1520656466000,1.0],[1520656766000,1.0],[1520657066000,1.0],[1520657367000,1.0],[1520657666000,1.0],[1520657966000,1.0],[1520658266000,1.0],[1520658566000,1.0],[1520658867000,1.0],[1520659166000,1.0],[1520659466000,1.0],[1520659767000,1.0],[1520660066000,1.0],[1520660366000,1.0],[1520660667000,1.0],[1520660966000,1.0],[1520661266000,1.0],[1520661566000,1.0],[1520661866000,1.0],[1520662165000,1.0],[1520662466000,1.0],[1520662767000,1.0],[1520663067000,1.0],[1520663365000,1.0],[1520663666000,1.0],[1520663966000,1.0],[1520664266000,1.0],[1520664566000,1.0],[1520664865000,1.0],[1520665167000,1.0],[1520665467000,1.0],[1520665767000,1.0],[1520666066000,1.0],[1520666366000,1.0],[1520666667000,1.0],[1520666967000,1.0],[1520667266000,1.0],[1520667565000,1.0],[1520667866000,1.0],[1520668166000,1.0],[1520668466000,1.0],[1520668766000,1.0],[1520669066000,1.0],[1520669366000,1.0],[1520669666000,1.0],[1520669966000,1.0],[1520670266000,1.0],[1520670566000,1.0],[1520670866000,1.0],[1520671166000,1.0],[1520671466000,1.0],[1520671765000,1.0],[1520672066000,1.0],[1520672366000,1.0],[1520672666000,1.0],[1520672966000,1.0],[1520673265000,1.0],[1520673566000,1.0],[1520673866000,1.0],[1520674166000,1.0],[1520674466000,1.0],[1520674766000,1.0],[1520675066000,1.0],[1520675366000,1.0],[1520675665000,1.0],[1520675965000,1.0],[1520676266000,1.0],[1520676566000,1.0],[1520676866000,1.0],[1520677166000,1.0],[1520677466000,1.0],[1520677766000,1.0],[1520678064000,1.0],[1520678366000,1.0],[1520678665000,1.0],[1520678965000,1.0],[1520679265000,1.0],[1520679566000,1.0],[1520679866000,1.0],[1520680165000,1.0],[1520680466000,1.0],[1520680766000,1.0],[1520681066000,1.0],[1520681366000,1.0],[1520681667000,1.0],[1520681966000,1.0],[1520682266000,1.0],[1520682566000,1.0],[1520682866000,1.0],[1520683166000,1.0],[1520683467000,1.0],[1520683766000,1.0],[1520684067000,1.0],[1520684366000,1.0],[1520684666000,1.0],[1520684966000,1.0],[1520685266000,1.0],[1520685566000,1.0],[1520685866000,1.0],[1520686165000,1.0],[1520686464000,1.0],[1520686765000,1.0],[1520687066000,1.0],[1520687367000,1.0],[1520687666000,1.0],[1520687966000,1.0],[1520688266000,1.0],[1520688566000,1.0],[1520688867000,1.0],[1520689167000,1.0],[1520689466000,1.0],[1520689766000,1.0],[1520690067000,1.0],[1520690366000,1.0],[1520690666000,1.0],[1520690966000,1.0],[1520691266000,1.0],[1520691566000,1.0],[1520691866000,1.0],[1520692166000,1.0],[1520692466000,1.0],[1520692766000,1.0],[1520693066000,1.0],[1520693366000,1.0],[1520693665000,1.0],[1520693966000,1.0],[1520694266000,1.0],[1520694566000,1.0],[1520694866000,1.0],[1520695167000,1.0],[1520695466000,1.0],[1520695765000,1.0],[1520696066000,1.0],[1520696366000,1.0],[1520696666000,1.0],[1520696965000,1.0],[1520697266000,1.0],[1520697564000,1.0],[1520697864000,1.0],[1520698166000,1.0],[1520698467000,1.0],[1520698767000,1.0],[1520699066000,1.0],[1520699366000,1.0],[1520699665000,1.0],[1520699966000,1.0],[1520700265000,1.0],[1520700566000,1.0],[1520700866000,1.0],[1520701166000,1.0],[1520701466000,1.0],[1520701764000,1.0],[1520702066000,1.0],[1520702366000,1.0]],\"price_usd\":[[1520615967000,8882.01],[1520616265000,8880.53],[1520616566000,8888.29],[1520616866000,8849.37],[1520617166000,8845.23],[1520617466000,8850.86],[1520617766000,8863.65],[1520618066000,8862.17],[1520618366000,8857.63],[1520618666000,8873.6],[1520618965000,8886.72],[1520619266000,8879.4],[1520619566000,8889.96],[1520619866000,8927.24],[1520620166000,8951.37],[1520620466000,8968.0],[1520620767000,8990.0],[1520621066000,8995.64],[1520621365000,8980.89],[1520621665000,8964.28],[1520621966000,8961.43],[1520622267000,8958.6],[1520622566000,8958.88],[1520622866000,8896.16],[1520623166000,8836.75],[1520623465000,8807.03],[1520623766000,8812.31],[1520624066000,8807.59],[1520624367000,8815.32],[1520624666000,8823.14],[1520624966000,8824.0],[1520625266000,8816.82],[1520625566000,8828.9],[1520625866000,8844.78],[1520626166000,8883.62],[1520626465000,8881.62],[1520626767000,8883.34],[1520627066000,8896.87],[1520627366000,8893.86],[1520627666000,8898.3],[1520627966000,8869.68],[1520628265000,8864.35],[1520628566000,8873.67],[1520628866000,8937.33],[1520629167000,9015.89],[1520629466000,9035.67],[1520629766000,9042.96],[1520630066000,9071.92],[1520630366000,9114.88],[1520630666000,9121.99],[1520630966000,9128.09],[1520631266000,9126.05],[1520631566000,9121.3],[1520631865000,9138.74],[1520632166000,9152.06],[1520632466000,9122.98],[1520632766000,9110.43],[1520633066000,9063.33],[1520633366000,9084.85],[1520633665000,9100.34],[1520633967000,9103.91],[1520634266000,9093.2],[1520634564000,9128.54],[1520634865000,9145.49],[1520635166000,9188.5],[1520635466000,9238.51],[1520635766000,9262.63],[1520636066000,9262.0],[1520636366000,9266.13],[1520636666000,9266.38],[1520636966000,9258.48],[1520637266000,9265.86],[1520637566000,9307.55],[1520637865000,9335.3],[1520638166000,9347.19],[1520638467000,9339.43],[1520638765000,9341.05],[1520639066000,9362.46],[1520639366000,9371.23],[1520639666000,9350.38],[1520639964000,9337.55],[1520640266000,9350.59],[1520640566000,9380.69],[1520640867000,9385.43],[1520641166000,9393.08],[1520641466000,9379.2],[1520641766000,9345.98],[1520642066000,9336.13],[1520642364000,9331.09],[1520642667000,9341.79],[1520642966000,9333.74],[1520643266000,9325.14],[1520643566000,9358.97],[1520643864000,9388.94],[1520644167000,9406.78],[1520644466000,9402.64],[1520644767000,9370.94],[1520645066000,9378.99],[1520645366000,9395.11],[1520645667000,9415.93],[1520645967000,9433.74],[1520646265000,9446.81],[1520646566000,9446.64],[1520646866000,9432.9],[1520647165000,9428.73],[1520647465000,9423.49],[1520647767000,9396.0],[1520648066000,9381.19],[1520648365000,9385.54],[1520648666000,9371.77],[1520648967000,9348.4],[1520649266000,9326.92],[1520649566000,9335.38],[1520649867000,9334.62],[1520650163000,9348.31],[1520650467000,9366.99],[1520650766000,9368.41],[1520651065000,9357.87],[1520651366000,9354.76],[1520651666000,9268.67],[1520651966000,9252.3],[1520652265000,9241.22],[1520652565000,9232.1],[1520652866000,9236.18],[1520653166000,9246.85],[1520653466000,9255.01],[1520653766000,9260.82],[1520654066000,9280.11],[1520654365000,9292.04],[1520654666000,9293.98],[1520654966000,9315.62],[1520655266000,9316.04],[1520655566000,9324.33],[1520655866000,9344.4],[1520656166000,9363.66],[1520656466000,9374.96],[1520656766000,9387.51],[1520657066000,9387.78],[1520657367000,9371.06],[1520657666000,9363.45],[1520657966000,9369.97],[1520658266000,9380.0],[1520658566000,9382.25],[1520658867000,9381.21],[1520659166000,9350.13],[1520659466000,9329.69],[1520659767000,9337.57],[1520660066000,9363.09],[1520660366000,9392.98],[1520660667000,9395.28],[1520660966000,9395.4],[1520661266000,9397.88],[1520661566000,9402.2],[1520661866000,9457.5],[1520662165000,9496.77],[1520662466000,9527.42],[1520662767000,9525.96],[1520663067000,9526.05],[1520663365000,9531.01],[1520663666000,9531.32],[1520663966000,9515.56],[1520664266000,9502.03],[1520664566000,9496.22],[1520664865000,9501.86],[1520665167000,9490.05],[1520665467000,9499.2],[1520665767000,9478.75],[1520666066000,9476.13],[1520666366000,9475.73],[1520666667000,9495.42],[1520666967000,9481.61],[1520667266000,9467.03],[1520667565000,9463.18],[1520667866000,9442.78],[1520668166000,9441.16],[1520668466000,9460.61],[1520668766000,9466.58],[1520669066000,9448.31],[1520669366000,9444.17],[1520669666000,9440.78],[1520669966000,9440.94],[1520670266000,9448.21],[1520670566000,9453.04],[1520670866000,9454.11],[1520671166000,9455.69],[1520671466000,9471.83],[1520671765000,9462.7],[1520672066000,9453.12],[1520672366000,9438.19],[1520672666000,9431.58],[1520672966000,9404.76],[1520673265000,9379.15],[1520673566000,9348.07],[1520673866000,9354.67],[1520674166000,9360.37],[1520674466000,9377.14],[1520674766000,9369.54],[1520675066000,9373.38],[1520675366000,9365.65],[1520675665000,9361.66],[1520675965000,9350.35],[1520676266000,9312.92],[1520676566000,9294.67],[1520676866000,9296.04],[1520677166000,9311.78],[1520677466000,9328.68],[1520677766000,9328.01],[1520678064000,9327.32],[1520678366000,9343.72],[1520678665000,9357.13],[1520678965000,9390.22],[1520679265000,9383.28],[1520679566000,9394.24],[1520679866000,9397.69],[1520680165000,9390.33],[1520680466000,9391.48],[1520680766000,9385.48],[1520681066000,9377.66],[1520681366000,9377.57],[1520681667000,9381.84],[1520681966000,9405.15],[1520682266000,9426.07],[1520682566000,9430.27],[1520682866000,9438.48],[1520683166000,9428.53],[1520683467000,9413.36],[1520683766000,9402.78],[1520684067000,9378.71],[1520684366000,9389.88],[1520684666000,9376.9],[1520684966000,9386.57],[1520685266000,9371.58],[1520685566000,9369.91],[1520685866000,9351.52],[1520686165000,9338.09],[1520686464000,9351.71],[1520686765000,9359.75],[1520687066000,9348.98],[1520687367000,9348.23],[1520687666000,9349.79],[1520687966000,9330.92],[1520688266000,9323.85],[1520688566000,9341.73],[1520688867000,9364.51],[1520689167000,9370.46],[1520689466000,9357.3],[1520689766000,9345.65],[1520690067000,9345.65],[1520690366000,9353.33],[1520690666000,9350.27],[1520690966000,9398.0],[1520691266000,9450.33],[1520691566000,9480.98],[1520691866000,9489.22],[1520692166000,9503.32],[1520692466000,9501.85],[1520692766000,9492.82],[1520693066000,9491.04],[1520693366000,9482.25],[1520693665000,9484.27],[1520693966000,9491.81],[1520694266000,9492.89],[1520694566000,9488.15],[1520694866000,9497.2],[1520695167000,9512.59],[1520695466000,9508.65],[1520695765000,9505.11],[1520696066000,9473.41],[1520696366000,9454.87],[1520696666000,9455.23],[1520696965000,9457.17],[1520697266000,9454.51],[1520697564000,9436.4],[1520697864000,9439.95],[1520698166000,9422.67],[1520698467000,9425.92],[1520698767000,9423.0],[1520699066000,9431.59],[1520699366000,9436.42],[1520699665000,9434.66],[1520699966000,9436.11],[1520700265000,9434.64],[1520700566000,9447.58],[1520700866000,9456.57],[1520701166000,9451.67],[1520701466000,9458.58],[1520701764000,9453.22],[1520702066000,9450.17],[1520702366000,9436.26]],\"volume_usd\":[[1520615967000,8433140000],[1520616265000,8356970000],[1520616566000,8311500000],[1520616866000,8268780000],[1520617166000,8223270000],[1520617466000,8202950000],[1520617766000,8211190000],[1520618066000,8209660000],[1520618366000,8193990000],[1520618666000,8195160000],[1520618965000,8199530000],[1520619266000,8185820000],[1520619566000,8159070000],[1520619866000,8202730000],[1520620166000,8228520000],[1520620466000,8221950000],[1520620767000,8231720000],[1520621066000,8222290000],[1520621365000,8191210000],[1520621665000,8175870000],[1520621966000,8176490000],[1520622267000,8175860000],[1520622566000,8166300000],[1520622866000,8127320000],[1520623166000,8072460000],[1520623465000,8070690000],[1520623766000,8081500000],[1520624066000,8091510000],[1520624367000,8083340000],[1520624666000,8090690000],[1520624966000,8089490000],[1520625266000,8083350000],[1520625566000,8085210000],[1520625866000,8102130000],[1520626166000,8132320000],[1520626465000,8134650000],[1520626767000,8120150000],[1520627066000,8142340000],[1520627366000,8147620000],[1520627666000,8142970000],[1520627966000,8121180000],[1520628265000,8095920000],[1520628566000,8110300000],[1520628866000,8174040000],[1520629167000,8265690000],[1520629466000,8281700000],[1520629766000,8273880000],[1520630066000,8301560000],[1520630366000,8378890000],[1520630666000,8374830000],[1520630966000,8377960000],[1520631266000,8377430000],[1520631566000,8370330000],[1520631865000,8373870000],[1520632166000,8394840000],[1520632466000,8382560000],[1520632766000,8356750000],[1520633066000,8335880000],[1520633366000,8344880000],[1520633665000,8372590000],[1520633967000,8368780000],[1520634266000,8360030000],[1520634564000,8393180000],[1520634865000,8410600000],[1520635166000,8427480000],[1520635466000,8510990000],[1520635766000,8532630000],[1520636066000,8527780000],[1520636366000,8525140000],[1520636666000,8525660000],[1520636966000,8516640000],[1520637266000,8526710000],[1520637566000,8580790000],[1520637865000,8631020000],[1520638166000,8638340000],[1520638467000,8656020000],[1520638765000,8660260000],[1520639066000,8688960000],[1520639366000,8715720000],[1520639666000,8711570000],[1520639964000,8704190000],[1520640266000,8715590000],[1520640566000,8752070000],[1520640867000,8766650000],[1520641166000,8769170000],[1520641466000,8774540000],[1520641766000,8757740000],[1520642066000,8764950000],[1520642364000,8776810000],[1520642667000,8783120000],[1520642966000,8785140000],[1520643266000,8782090000],[1520643566000,8831250000],[1520643864000,8860600000],[1520644167000,8885360000],[1520644466000,8871230000],[1520644767000,8850510000],[1520645066000,8841740000],[1520645366000,8862820000],[1520645667000,8879630000],[1520645967000,8914720000],[1520646265000,8891930000],[1520646566000,8791560000],[1520646866000,8740550000],[1520647165000,8708220000],[1520647465000,8683500000],[1520647767000,8627720000],[1520648066000,8560020000],[1520648365000,8522110000],[1520648666000,8502940000],[1520648967000,8461620000],[1520649266000,8432280000],[1520649566000,8429220000],[1520649867000,8429500000],[1520650163000,8428340000],[1520650467000,8436510000],[1520650766000,8434670000],[1520651065000,8412600000],[1520651366000,8393930000],[1520651666000,8379620000],[1520651966000,8346780000],[1520652265000,8353340000],[1520652565000,8334110000],[1520652866000,8337720000],[1520653166000,8343580000],[1520653466000,8341290000],[1520653766000,8336990000],[1520654066000,8341860000],[1520654365000,8349930000],[1520654666000,8328300000],[1520654966000,8299330000],[1520655266000,8288230000],[1520655566000,8217680000],[1520655866000,8179740000],[1520656166000,8178250000],[1520656466000,8142680000],[1520656766000,8107530000],[1520657066000,8084530000],[1520657367000,8047380000],[1520657666000,8022910000],[1520657966000,8009060000],[1520658266000,7994360000],[1520658566000,7973950000],[1520658867000,7947870000],[1520659166000,7916530000],[1520659466000,7892500000],[1520659767000,7895230000],[1520660066000,7901410000],[1520660366000,7921010000],[1520660667000,7914150000],[1520660966000,7893600000],[1520661266000,7822860000],[1520661566000,7786120000],[1520661866000,7799170000],[1520662165000,7811410000],[1520662466000,7803940000],[1520662767000,7772970000],[1520663067000,7734750000],[1520663365000,7711520000],[1520663666000,7664950000],[1520663966000,7623040000],[1520664266000,7590670000],[1520664566000,7569390000],[1520664865000,7564700000],[1520665167000,7539660000],[1520665467000,7490270000],[1520665767000,7449440000],[1520666066000,7437820000],[1520666366000,7415300000],[1520666667000,7417320000],[1520666967000,7399500000],[1520667266000,7372540000],[1520667565000,7353120000],[1520667866000,7336030000],[1520668166000,7315200000],[1520668466000,7317080000],[1520668766000,7322330000],[1520669066000,7297760000],[1520669366000,7261210000],[1520669666000,7263590000],[1520669966000,7251360000],[1520670266000,7241570000],[1520670566000,7234770000],[1520670866000,7228210000],[1520671166000,7218250000],[1520671466000,7209270000],[1520671765000,7202530000],[1520672066000,7184000000],[1520672366000,7135930000],[1520672666000,7125690000],[1520672966000,7117300000],[1520673265000,7065440000],[1520673566000,7056760000],[1520673866000,7067190000],[1520674166000,7065520000],[1520674466000,7068510000],[1520674766000,7053600000],[1520675066000,7018270000],[1520675366000,6978750000],[1520675665000,6950900000],[1520675965000,6925830000],[1520676266000,6900260000],[1520676566000,6876520000],[1520676866000,6864190000],[1520677166000,6872840000],[1520677466000,6859550000],[1520677766000,6849900000],[1520678064000,6839190000],[1520678366000,6842030000],[1520678665000,6855620000],[1520678965000,6861120000],[1520679265000,6853120000],[1520679566000,6820620000],[1520679866000,6819010000],[1520680165000,6806150000],[1520680466000,6795390000],[1520680766000,6794780000],[1520681066000,6773670000],[1520681366000,6764230000],[1520681667000,6769530000],[1520681966000,6781330000],[1520682266000,6785560000],[1520682566000,6747630000],[1520682866000,6713220000],[1520683166000,6687630000],[1520683467000,6650320000],[1520683766000,6595810000],[1520684067000,6569250000],[1520684366000,6560830000],[1520684666000,6558810000],[1520684966000,6541240000],[1520685266000,6532300000],[1520685566000,6513100000],[1520685866000,6500420000],[1520686165000,6488620000],[1520686464000,6488420000],[1520686765000,6478450000],[1520687066000,6455600000],[1520687367000,6444710000],[1520687666000,6435920000],[1520687966000,6419920000],[1520688266000,6409680000],[1520688566000,6416560000],[1520688867000,6427700000],[1520689167000,6419770000],[1520689466000,6404740000],[1520689766000,6386560000],[1520690067000,6376740000],[1520690366000,6383100000],[1520690666000,6376230000],[1520690966000,6402100000],[1520691266000,6460120000],[1520691566000,6479660000],[1520691866000,6474360000],[1520692166000,6463630000],[1520692466000,6447060000],[1520692766000,6420260000],[1520693066000,6408260000],[1520693366000,6403290000],[1520693665000,6376970000],[1520693966000,6366680000],[1520694266000,6352310000],[1520694566000,6319950000],[1520694866000,6296750000],[1520695167000,6298810000],[1520695466000,6288440000],[1520695765000,6265890000],[1520696066000,6240710000],[1520696366000,6220270000],[1520696666000,6216700000],[1520696965000,6219470000],[1520697266000,6209880000],[1520697564000,6193220000],[1520697864000,6186420000],[1520698166000,6177180000],[1520698467000,6158680000],[1520698767000,6153530000],[1520699066000,6122730000],[1520699366000,6083610000],[1520699665000,6050610000],[1520699966000,6000460000],[1520700265000,5979350000],[1520700566000,5967090000],[1520700866000,5954690000],[1520701166000,5941500000],[1520701466000,5922430000],[1520701764000,5898860000],[1520702066000,5882300000],[1520702366000,5867670000]]}";
//                setDataFromResponse(response);
            }
        });
        queue.add(stringRequest);
    }

    private void setDataFromResponse(String response) {
        try {
            JSONObject jsonObject = new JSONObject(response);
            JSONArray jsonArray = jsonObject.getJSONArray("price_usd");

            ArrayList<Entry> entries = new ArrayList<>();

            for (int i = 0; i < jsonArray.length(); i++) {
                entries.add(new Entry(jsonArray.getJSONArray(i).optLong(0),
                        jsonArray.getJSONArray(i).optLong(1)));
            }

            LineDataSet dataSet = new LineDataSet(entries, "BTC/USD");
            dataSet.setDrawCircles(false);
            dataSet.setDrawValues(true);
            dataSet.setHighlightEnabled(true);
            dataSet.setDrawHighlightIndicators(true);
            dataSet.setHighLightColor(Color.WHITE);
            LineData data = new LineData(dataSet);

            chart.setData(data);
            chart.invalidate();
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }

    private void initFlow_Candle() {
        ArrayList<CandleEntry> entries = new ArrayList<>();

        entries.add(new CandleEntry(0, 4.62f, 2.02f, 2.70f, 4.13f));
        entries.add(new CandleEntry(1, 5.50f, 2.70f, 5.35f, 4.96f));
        entries.add(new CandleEntry(2, 5.25f, 3.02f, 3.50f, 4.50f));
        entries.add(new CandleEntry(3, 6f, 3.25f, 4.40f, 5.0f));
        entries.add(new CandleEntry(4, 5.57f, 2f, 2.80f, 4.5f));

        CandleDataSet dataSet = new CandleDataSet(entries, "Label");
        dataSet.setColor(Color.rgb(80, 80, 80));
        dataSet.setShadowColor(Color.DKGRAY);
        dataSet.setShadowWidth(0.7f);
        dataSet.setDecreasingColor(Color.RED);
        dataSet.setDecreasingPaintStyle(Paint.Style.FILL);
        dataSet.setIncreasingColor(Color.rgb(122, 242, 84));
        dataSet.setIncreasingPaintStyle(Paint.Style.FILL_AND_STROKE);
        dataSet.setNeutralColor(Color.BLUE);
        dataSet.setValueTextColor(Color.RED);

        CandleData candleData = new CandleData(dataSet);
//        chart.setData(candleData);
        chart.invalidate();
    }

    @Override
    public void onResume() {
        super.onResume();
    }

    @Override
    public void onPause() {
        super.onPause();
    }
}
